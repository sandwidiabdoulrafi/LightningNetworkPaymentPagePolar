'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _url = require('url');

var _url2 = _interopRequireDefault(_url);

var _querystring = require('querystring');

var _querystring2 = _interopRequireDefault(_querystring);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Decode an lndconnect url.
 * @param  {String} lndconnect url to parse.
 * @return {Object} Lnd connect data (object containing host, cert, and macaroon keys).
 */
const parse = (string = '') => {
  const parsedUrl = _url2.default.parse(string);
  const parsedQuery = _querystring2.default.parse(parsedUrl.query);

  if (parsedUrl.protocol !== 'lndconnect:') {
    throw new Error('Invalid protocol');
  }

  return {
    host: parsedUrl.host,
    cert: parsedQuery.cert,
    macaroon: parsedQuery.macaroon
  };
};

exports.default = parse;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXJzZS5qcyJdLCJuYW1lcyI6WyJwYXJzZSIsInN0cmluZyIsInBhcnNlZFVybCIsInVybCIsInBhcnNlZFF1ZXJ5IiwicXVlcnlzdHJpbmciLCJxdWVyeSIsInByb3RvY29sIiwiRXJyb3IiLCJob3N0IiwiY2VydCIsIm1hY2Fyb29uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztBQUNBOzs7Ozs7QUFFQTs7Ozs7QUFLQSxNQUFNQSxRQUFRLENBQUNDLFNBQVMsRUFBVixLQUFpQjtBQUM3QixRQUFNQyxZQUFZQyxjQUFJSCxLQUFKLENBQVVDLE1BQVYsQ0FBbEI7QUFDQSxRQUFNRyxjQUFjQyxzQkFBWUwsS0FBWixDQUFrQkUsVUFBVUksS0FBNUIsQ0FBcEI7O0FBRUEsTUFBSUosVUFBVUssUUFBVixLQUF1QixhQUEzQixFQUEwQztBQUN4QyxVQUFNLElBQUlDLEtBQUosQ0FBVSxrQkFBVixDQUFOO0FBQ0Q7O0FBRUQsU0FBTztBQUNMQyxVQUFNUCxVQUFVTyxJQURYO0FBRUxDLFVBQU1OLFlBQVlNLElBRmI7QUFHTEMsY0FBVVAsWUFBWU87QUFIakIsR0FBUDtBQUtELENBYkQ7O2tCQWVlWCxLIiwiZmlsZSI6InBhcnNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHVybCBmcm9tICd1cmwnXG5pbXBvcnQgcXVlcnlzdHJpbmcgZnJvbSAncXVlcnlzdHJpbmcnXG5cbi8qKlxuICogRGVjb2RlIGFuIGxuZGNvbm5lY3QgdXJsLlxuICogQHBhcmFtICB7U3RyaW5nfSBsbmRjb25uZWN0IHVybCB0byBwYXJzZS5cbiAqIEByZXR1cm4ge09iamVjdH0gTG5kIGNvbm5lY3QgZGF0YSAob2JqZWN0IGNvbnRhaW5pbmcgaG9zdCwgY2VydCwgYW5kIG1hY2Fyb29uIGtleXMpLlxuICovXG5jb25zdCBwYXJzZSA9IChzdHJpbmcgPSAnJykgPT4ge1xuICBjb25zdCBwYXJzZWRVcmwgPSB1cmwucGFyc2Uoc3RyaW5nKVxuICBjb25zdCBwYXJzZWRRdWVyeSA9IHF1ZXJ5c3RyaW5nLnBhcnNlKHBhcnNlZFVybC5xdWVyeSlcblxuICBpZiAocGFyc2VkVXJsLnByb3RvY29sICE9PSAnbG5kY29ubmVjdDonKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHByb3RvY29sJylcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaG9zdDogcGFyc2VkVXJsLmhvc3QsXG4gICAgY2VydDogcGFyc2VkUXVlcnkuY2VydCxcbiAgICBtYWNhcm9vbjogcGFyc2VkUXVlcnkubWFjYXJvb24sXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgcGFyc2VcbiJdfQ==